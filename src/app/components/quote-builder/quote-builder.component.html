<div class="quote-builder">
  <p-card>
    <div class="sub-menu">
      
      <p-splitButton [label]="this.addButtonLabel" icon="pi pi-plus" [model]="quoteItemOptions" class="mb-3" size="small" severity="info">
      </p-splitButton>

      <!-- reset button -->
      <p-button icon="ph ph-arrow-counter-clockwise" [label]="this.resetQuoteLabel" size="small" severity="danger" (click)="resetQuote()"
        class="ml-2"></p-button>
    </div>

    <div class="content">
      <form [formGroup]="form">
        <p-table [value]="lines.controls" [paginator]="true" [rows]="25" [scrollable]="true" scrollHeight="700px" [size]="'small'" [paginator]="false" [showGridlines]="true"> 
          <ng-template pTemplate="header">
            <tr>
              <th i18n>active</th>
              <th i18n>Item</th>
              <th i18n>Unit Type</th>
              <th i18n>Units</th>
              <th i18n>Price/Unit</th>
              <th i18n>Price</th>
              <th i18n>Actions</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-group let-i="rowIndex">
            <tr [formGroup]="group">
              <td>
                <p-toggle-switch formControlName="active"></p-toggle-switch>
              </td>
              <td>{{ group.get('item')?.value }}</td>
              <td>{{ group.get('unitType')?.value }}</td>
              <td>
                <input pInputText formControlName="units" type="number" class="w-full" />
              </td>
              <td>
                <input pInputText formControlName="pricePerUnit" type="number" class="w-full" />
              </td>
              <td>{{ group.get('totalPrice')?.value | currency: 'ILS' }}</td>
              <td>
                <button pButton class="p-button-danger" icon="pi pi-trash" type="button" (click)="removeLine(i)">
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>

        <div class="mt-4 font-bold">
          <span i18n>Total: {{ total | currency:'ILS' }}</span>
        </div>
      </form>
    </div>

  </p-card>
</div>